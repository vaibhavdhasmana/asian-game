  useEffect(() => {
    if (!serverLockChecked || alreadySubmitted || submittedRef.current) return;
    if (finished || timeUp) {
      localStorage.setItem(KEYS.done, "true");
      localStorage.setItem(KEYS.final, String(score)); // <â€” persist final score for reloads
      localStorage.removeItem(KEYS.state);
      localStorage.removeItem(KEYS.timer);
      (async () => {
        await submitScore(score);
        setAlreadySubmitted(true);
      })();
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [finished, timeUp, serverLockChecked, alreadySubmitted]);
  const swap = (i, j) => {